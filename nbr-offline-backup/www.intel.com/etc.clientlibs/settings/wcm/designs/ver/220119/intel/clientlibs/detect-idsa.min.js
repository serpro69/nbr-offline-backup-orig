var DsaConfig={appVersion:"Avaamo",baseApi:"/intel/v1.0/",pingCommand:"ping?",pingSendValue:100,serviceCheckUrls:["http://127.0.0.1:28385","http://127.0.0.1:28386","http://127.0.0.1:28387","http://127.0.0.1:28388","http://127.0.0.1:28389"]};DsaConfig.appVersionParameter="jsver\x3d"+DsaConfig.appVersion;DsaConfig.pingReturnValue=2*DsaConfig.pingSendValue;
var RequestResult=function(){return function(a){this.headers=a.getAllResponseHeaders();if("string"===typeof a.response)try{this.response=JSON.parse(a.response)}catch(d){this.response=void 0}else this.response=a.response;this.type=a.responseType;this.status=a.status;this.statusText=a.statusText}}(),DsaService={getAsync:function(a,d){return DsaService.requestAsync("GET",a,d,void 0,void 0)},requestAsync:function(a,d,h,f,e){return new Promise(function(g,c){var b=new XMLHttpRequest;b.open(a,d);void 0!==
e&&0<e&&(b.timeout=e);b.onload=function(){var a=new RequestResult(b);a.status&&200<=a.status&&300>a.status?g(a):c(a)};b.onerror=function(){var a=new RequestResult(b);c(a)};b.ontimeout=function(){var a=new RequestResult(b);c(a)};switch(h){case "json":b.responseType="json";break;case "text":b.responseType=""}b.send(f)})}},DsaDetect={startCheckingForService:function(a,d,h){var f=!1,e=DsaConfig.serviceCheckUrls.length,g=0;try{for(var c=0;c<DsaConfig.serviceCheckUrls.length;c++)DsaService.getAsync(""+
DsaConfig.serviceCheckUrls[c]+DsaConfig.baseApi+DsaConfig.pingCommand+"id\x3d"+DsaConfig.pingSendValue+"\x26"+DsaConfig.appVersionParameter,"json").then(function(b){if(!f)if(b&&b.response)if((b=b.response)&&b.id===DsaConfig.pingReturnValue)f=!0,a();else throw Error("Unexpected value returned from ping");else throw Error("Empty result from ping");}).catch(function(){g++;if(g===e)return d()})}catch(b){return h()}}};